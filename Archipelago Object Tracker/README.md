# Archipelago-Object-Tracking
## Running from pull
To run any of the files in this git the libraries from the requirements.txt are required to their specific version listed. In our project we have used Anaconda to manage our environment and dependencies. To install the requirements in a standard python environment:
```shell
python -m pip install -r requirements.txt
```
The above can be executed form a console pointed at the root directory where the requirements.txt is located.

```shell
conda install --force-reinstall -y --name <environment name> -c conda-forge --file requirements.txt
```
The above will install the requirements and overwrite any preinstalled packages of the same name but different version.

After installing the requirements for the environment to run the code from the repository select any of the files to run, a notebook needs the kernel to be defined as the environment you installed the requirements to, in the IDE we used (VSCode) it is found as shown below.

### Notebooks
![Notebook environment selected for VSCode](https://i.imgur.com/CEEjMsm.png)

### python file
![Environment selected for VSCode](https://i.imgur.com/GN31ija.png)

## Running main.py
### Folder structure
To run the main.py file the only other things needed are a trained model and a video to process. The application as is will generate two folders in the directory the main.py file is run from, output, and model. These folders are the default directories for the detection model, and the default output file location. 
The typical folder structure where the main.py is located will appear as below.

![Generated folders](https://i.imgur.com/hvp394M.png)

### Execution arguments
There are two ways to execute the python script, one is to directly execute the file from the command line with the following command. 
```shell
python main.py
```
 The above will run the python file and generate the GUI to set parameters. The second way to execute the python file is with full arguments in the command line.
```shell
python main.py <path to video> <path to output> <one of .csv, .json, .xml, .xlsx>
```
or
```shell
python main.py C:\users\public\videos\testing.mp4 C:\users\public\videos .csv
```
![input diagram](https://i.imgur.com/5w7wEi4.png)
### Output
The main.py will generate three files, an output of the video passed in with visuals of the detections process drawn in incase of unexpected data being shown in the output data file. The output data file will be named the same as the input file (i.e 2022-03-21-linefishing.mp4 -> 2022-03-21-linefishing.csv) in the defined output folder. The last file generated by main.py on execution is a log file named 'output_\<Month>-\<Day>-\<Hour>-\<Minute>.log' in the same directory as main.py.

![Output Example](https://i.imgur.com/5r6lbm9.png)
